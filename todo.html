<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tasks | NEXUS</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">

</head>
<body>
    <div class="app-container">
        <!-- Auth Overlay -->
        <div id="auth-overlay" style="position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.85); backdrop-filter: blur(10px); z-index: 9999; display: none; align-items: center; justify-content: center; flex-direction: column;">
            <div style="background: #18181b; padding: 3rem; border-radius: 24px; border: 1px solid rgba(255,255,255,0.1); text-align: center; max-width: 400px;">
                <h1 style="margin-bottom: 1rem; font-size: 2rem; background: linear-gradient(135deg, #8b5cf6, #d946ef); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">NEXUS</h1>
                <p style="color: #a1a1aa; margin-bottom: 2rem;">Sign in to access your synchronized workspace.</p>
                <button id="login-btn" onclick="loginWithGoogle()" style="width: 100%; padding: 1rem; background: white; color: black; border-radius: 12px; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 0.5rem; cursor: pointer; border: none;">
                    <i class="fab fa-google"></i> Continue with Google
                </button>
            </div>
        </div>

        <div id="sidebar-container"></div>

        <main class="main-content">
            <header class="header">
                <h1 class="page-title">My Tasks</h1>
            </header>

            <!-- Smart Input Bar -->
            <form id="taskForm" class="task-input-bar">
                <div class="custom-checkbox" style="border-style: dashed; opacity: 0.5;"></div>
                <input type="text" name="task" class="form-input" placeholder="Add a task..." required style="border: none; background: transparent; padding: 0.5rem; flex: 1; box-shadow: none; font-size: 1rem;">
                
                <!-- Hidden Date Input -->
                <input type="date" name="dueDate" id="dueDateInput" style="display: none;">

                <div class="smart-actions">
                    <!-- Date Trigger -->
                    <button type="button" class="action-btn" id="dateTrigger" title="Set Due Date">
                        <i class="far fa-calendar"></i>
                    </button>
                    <!-- Priority Trigger -->
                    <button type="button" class="action-btn" id="priorityTrigger" title="Set Priority">
                        <i class="fas fa-flag flag-icon flag-p4"></i>
                    </button>
                    <!-- Priority Hidden Value -->
                    <input type="hidden" name="priority" id="priorityInput" value="p4">
                </div>
                
                <button type="submit" class="btn btn-primary" style="width: 36px; height: 36px; padding: 0; display: flex; align-items: center; justify-content: center; border-radius: 8px;">
                    <i class="fas fa-arrow-up"></i>
                </button>
            </form>

            <div class="task-list" id="task-root">
                <!-- JS Populates -->
            </div>
        </main>
    </div>

    <!-- Firebase SDKs (Compat version for simplicity) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <!-- App Scripts -->
    <script src="scripts/firebase-config.js"></script>
    <script src="scripts/auth.js"></script>
    <script src="scripts/storage.js"></script>
    <script src="scripts/nav.js"></script>
    <script src="scripts/todo.js"></script>
</body>
</html>
